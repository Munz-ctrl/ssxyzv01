<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DressUp ‚Äî Sunsex</title>

  <!-- Base site styles -->
  <link rel="stylesheet" href="/shared/css/styles.css">
  <!-- Page styles -->
  <link rel="stylesheet" href="/apps/tools/dressup/css/dressup.css">

  <!-- Favicons / meta optional -->
</head>
<body class="dressup-body">
  <div id="appContainer" class="app-container">


    

 <!-- (Removed) top badge + old skin dropdown.
     We only show skins inside AVATAR tab now (featured + my skins). -->

    
<!-- Hidden canvas for watermark export (will be used later in Save button step) -->
<canvas id="downloadCanvas" style="display:none;"></canvas>


    <div id="hero" class="hero" data-default-hero="/apps/tools/dressup/assets/manq.png"></div>


  <div id="creditHUD" class="credit-hud">
  <div class="credit-topline">
    <div id="personalCreditPill" class="personal-pill">+0 ‚óô RUNS</div>

    <div class="buy-wrap">
      <!-- When logged OUT -->
      <button id="authOpenBtn" type="button">Log in / Sign up</button>

      <!-- When logged IN -->
      <button id="buyMenuToggle" class="buy-toggle" type="button">
        Buy credits <span class="buy-caret">‚ñæ</span>
      </button>

      <button id="authLogoutBtn" type="button" style="display:none;">Log out</button>

      <div id="buyMenu" class="buy-row" style="display:none;">
        <button class="pack-select" type="button" data-pack="pack_1">$1 (2 runs)</button>
        <button class="pack-select" type="button" data-pack="pack_5">$5 (10 runs)</button>
        <button class="pack-select" type="button" data-pack="pack_10">$10 (22 runs)</button>
        <button class="pack-select" type="button" data-pack="pack_20">$20 (45 runs)</button>

        <button id="buyCreditsBtn" class="buy-btn" type="button">Buy</button>
        <div id="buyStatus" class="buy-status"></div>
      </div>
    </div>
  </div>

  <div class="community-block">
    <div class="community-line">
      <span class="community-label">Demo ‚óô RUNS</span>
      <span id="communityBarText" class="community-bar-text">[‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë] 0 ‚óô left</span>
    </div>
  </div>
</div>



    <!-- <div class="banner"><span>Previous pieces / NOMAD SUITCASE ?</span></div> -->

        <!-- RIGHT PANEL: STYLE / AVATAR TABS -->
    <aside class="panel" aria-label="DressUp controls">
    <div class="panel-card">
      <!-- Tab header -->
      <div class="panel-tabs">
        <button class="panel-tab active" data-tab="style">STYLE</button>
        <button class="panel-tab" data-tab="avatar">AVATAR</button>
      </div>

      <!-- STYLE TAB (existing DressUp flow lives here) -->
      <div id="styleTab" class="panel-card panel-tab-content active">
        <div class="panel-instruction">
          &gt; 
          upload a garment or outfit.
        </div>

        <div class="thumb-wrap empty">
          <img id="garmentPreview" alt="">
        </div>

        <!-- Main actions (unchanged) -->
        <div class="panel-actions">
          <input id="fileInput" type="file" accept="image/*" hidden />
          <button id="btnUpload" class="btn primary">Upload Garment</button>
          <button id="btnGenerate" class="btn ghost" disabled> Put it on -1 ‚óô </button>
        </div>

        <!-- Thin secondary row: undo / download / reset -->
        <div class="panel-subactions">
          <button id="btnUndo" class="btn thin" style="display:none;">üîô</button>
          <button id="btnSave" class="btn thin" style="display:none;">download</button>
          <button id="btnResetHero" class="btn thin" style="display:none;">start over</button>
        </div>

        <div id="status" class="status" role="status" aria-live="polite"></div>
      </div>

      <!-- AVATAR TAB (phase 1: public avatars + gated create-your-own) -->
      <div id="avatarTab" class="panel-card panel-tab-content">
        <!-- Top: public avatar presets -->
        <!-- Featured public skins (visible to everyone) -->
      <div class="avatar-header">
        <div class="avatar-header-row">
          <span class="avatar-section-label">FEATURED</span>
         </div>

        <!-- Filled dynamically from Supabase dressup_skins where visibility in ('featured','public') and player_pid IS NULL -->
      <div id="featuredSkinsRow" class="avatar-public-row"></div>
</div>


        <!-- Guest view -->
        <!-- Guest view -->
<div id="avatarGuestSection" class="avatar-section avatar-guest">
  <p class="avatar-copy">
    Log in to create your own avatar.
  </p>

  <!-- Toggle to reveal login -->
  <button type="button"
          id="btnAvatarLoginPrompt"
          class="btn ghost btn-locked">
    Log in to unlock avatar creator
  </button>

  <!-- Inline email/password login -->
  
</div>


        <!-- Logged-in view -->
        <div id="avatarAuthedSection"
             class="avatar-section avatar-authed"
             style="display:none;">
          <p class="avatar-copy">
            Upload 3‚Äì5 images of your full body, including at least one face close-up.
          </p>

          <div class="avatar-upload-grid">
            <button type="button"
                    class="avatar-upload-slot"
                    data-index="0"><span>+</span></button>
            <button type="button"
                    class="avatar-upload-slot"
                    data-index="1"><span>+</span></button>
            <button type="button"
                    class="avatar-upload-slot"
                    data-index="2"><span>+</span></button>
           
          </div>

          <button type="button"
                  id="btnCreateAvatar"
                  class="btn primary">
            Create avatar -2 ‚óô
          </button>


          <!-- My skins (logged-in only) -->
           <div class="avatar-my-skins">
             <div class="avatar-header-row">
               <span class="avatar-section-label">MY SKINS</span>
             </div>
             <select id="mySkinSelect" class="my-skin-select"></select>
           
             <div id="mySkinActions" class="my-skin-actions" style="display:none;">
               <button type="button" id="btnSetAsBase" class="btn thin">Set as Base</button>
               <button type="button" id="btnDiscardAvatar" class="btn thin">Discard</button>
             </div>
           </div>

    
        </div>


        


        <div id="avatarStatus" class="status" role="status" aria-live="polite"></div>
      </div>
    </div>
  </aside>


    <!-- <footer class="watermark animated-text" id="dressupWatermark"> -->
    <footer class="watermark"id="dressupWatermark">
      <div id="animatedWatermarkText"></div>
    </footer>
  </div>


<dialog id="authDialog">
  <form method="dialog" novalidate style="min-width: 280px;">

    <div style="display:flex; justify-content:space-between; align-items:center; gap:12px;">
      <strong>DressUp Auth</strong>
      <button type="button" id="authDialogClose" aria-label="Close">‚úï</button>


    </div>

    <hr>

    <div style="display:flex; gap:8px; margin-bottom:10px;">
      <button type="button" id="authTabSignIn">Sign in</button>
      <button type="button" id="authTabSignUp">Sign up</button>
    </div>

    <div id="authPanelSignIn">
      <label>
        Email<br>
        <input id="authEmailIn" type="email" autocomplete="email" >
      </label>
      <br><br>
      <label>
        Password<br>
        <input id="authPassIn" type="password" autocomplete="current-password" >
      </label>
      <br><br>
      <button type="button" id="authBtnSignIn">Sign in</button>
    </div>

    <div id="authPanelSignUp" style="display:none;">
      <label>
        Email<br>
        <input id="authEmailUp" type="email" autocomplete="email" >
      </label>
      <br><br>
      <label>
        Password<br>
        <input id="authPassUp" type="password" autocomplete="new-password" >
      </label>
      <br><br>
      <button type="button" id="authBtnSignUp">Create account</button>
      <div style="font-size:12px; opacity:0.8; margin-top:8px;">
        (This does NOT create a Sunsex ‚Äúplayer‚Äù. It only authenticates DressUp.)
      </div>
    </div>

    <p id="authStatus" style="min-height:18px;"></p>
  </form>
</dialog>





<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<!-- DressUp uses its own Supabase client to avoid breaking other site apps -->
<script src="/apps/tools/dressup/js/sbClient.js"></script>

<script type="module" src="/apps/tools/dressup/js/dressup.js"></script>

  
  <!-- <style>
    .animated-text {
      /* font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; */
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

      font-size: 11px;
      line-height: 1;
      color: rgba(251, 251, 251, 0.85);
      text-shadow: 0 1px 2px rgba(0,0,0,0.4);
      position: absolute;
      left: 2%;
      bottom: 2%;
      z-index: 3;
      text-align: left;
      white-space: pre-line;
      letter-spacing: 0.02em;
      width: auto;
      min-width: 120px;
      max-width: 220px;
      pointer-events: none;
      background: none;
      animation: none;
    }
  </style> -->







</body>

</html>
