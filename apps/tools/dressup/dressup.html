<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DressUp â€” Sunsex</title>

  <!-- Base site styles -->
  <link rel="stylesheet" href="/shared/css/styles.css">
  <!-- Page styles -->
  <link rel="stylesheet" href="/apps/tools/dressup/css/dressup.css">

  <!-- Favicons / meta optional -->
</head>
<body class="dressup-body">
  <div id="appContainer" class="app-container">


    

 <!-- (Removed) top badge + old skin dropdown.
     We only show skins inside AVATAR tab now (featured + my skins). -->

    
<!-- Hidden canvas for watermark export (will be used later in Save button step) -->
<canvas id="downloadCanvas" style="display:none;"></canvas>


        <div id="hero" class="hero" data-default-hero="/apps/tools/dressup/assets/manq.png"></div>


        <!-- CREDIT HUD (bottom-right) -->
    <div id="creditHUD" class="credit-hud">
      <div id="personalCreditPill" class="personal-pill">+0 personal</div>

      <div class="community-block">
        <div class="community-line">
          <span class="community-label">COMMUNITY</span>
          <span id="communityBarText" class="community-bar-text">[â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘] 0 left</span>
        </div>
      </div>
    </div>


    <!-- <div class="banner"><span>Previous pieces / NOMAD SUITCASE ?</span></div> -->

        <!-- RIGHT PANEL: STYLE / AVATAR TABS -->
    <aside class="panel" aria-label="DressUp controls">
    <div class="panel-card">
      <!-- Tab header -->
      <div class="panel-tabs">
        <button class="panel-tab active" data-tab="style">STYLE</button>
        <button class="panel-tab" data-tab="avatar">AVATAR</button>
      </div>

      <!-- STYLE TAB (existing DressUp flow lives here) -->
      <div id="styleTab" class="panel-card panel-tab-content active">
        <div class="panel-instruction">
          &gt; 
          Style Player one garment at a time.
        </div>

        <div class="thumb-wrap empty">
          <img id="garmentPreview" alt="">
        </div>

        <!-- Main actions (unchanged) -->
        <div class="panel-actions">
          <input id="fileInput" type="file" accept="image/*" hidden />
          <button id="btnUpload" class="btn primary">Upload Garment</button>
          <button id="btnGenerate" class="btn ghost" disabled>Generate on Munz</button>
        </div>

        <!-- Thin secondary row: undo / download / reset -->
        <div class="panel-subactions">
          <button id="btnUndo" class="btn thin" style="display:none;">ðŸ”™</button>
          <button id="btnSave" class="btn thin" style="display:none;">download</button>
          <button id="btnResetHero" class="btn thin" style="display:none;">start over</button>
        </div>

        <div id="status" class="status" role="status" aria-live="polite"></div>
      </div>

      <!-- AVATAR TAB (phase 1: public avatars + gated create-your-own) -->
      <div id="avatarTab" class="panel-card panel-tab-content">
        <!-- Top: public avatar presets -->
        <!-- Featured public skins (visible to everyone) -->
      <div class="avatar-header">
        <div class="avatar-header-row">
          <span class="avatar-section-label">FEATURED</span>
         </div>

        <!-- Filled dynamically from Supabase dressup_skins where visibility in ('featured','public') and player_pid IS NULL -->
      <div id="featuredSkinsRow" class="avatar-public-row"></div>
</div>


        <!-- Guest view -->
        <!-- Guest view -->
<div id="avatarGuestSection" class="avatar-section avatar-guest">
  <p class="avatar-copy">
    Log in to create your own avatar.
  </p>

  <!-- Toggle to reveal login -->
  <button type="button"
          id="btnAvatarLoginPrompt"
          class="btn ghost btn-locked">
    Log in to unlock avatar creator
  </button>

  <!-- Inline email/password login -->
  <div id="dressupLoginForm" class="avatar-login-inline" style="display:none; margin-top:10px;">
    <div class="avatar-login-row">
      <input type="email"
             id="dressupLoginEmail"
             placeholder="Email"
             autocomplete="email" />
    </div>
    <div class="avatar-login-row">
      <input type="password"
             id="dressupLoginPassword"
             placeholder="Password"
             autocomplete="current-password" />
    </div>
    <div class="avatar-login-row">
      <button type="button"
              id="btnDressupLogin"
              class="btn thin">
        Sign in
      </button>
    </div>
    <div id="dressupLoginStatus" class="status small"></div>
  </div>
</div>


        <!-- Logged-in view -->
        <div id="avatarAuthedSection"
             class="avatar-section avatar-authed"
             style="display:none;">
          <p class="avatar-copy">
            Upload 3â€“5 images of your full body, including at least one face close-up.
          </p>

          <div class="avatar-upload-grid">
            <button type="button"
                    class="avatar-upload-slot"
                    data-index="0"><span>+</span></button>
            <button type="button"
                    class="avatar-upload-slot"
                    data-index="1"><span>+</span></button>
            <button type="button"
                    class="avatar-upload-slot"
                    data-index="2"><span>+</span></button>
           
          </div>

          <button type="button"
                  id="btnCreateAvatar"
                  class="btn primary">
            Create avatar (33 credits)
          </button>


          <!-- My skins (logged-in only) -->
           <div class="avatar-my-skins">
             <div class="avatar-header-row">
               <span class="avatar-section-label">MY SKINS</span>
             </div>
             <select id="mySkinSelect" class="my-skin-select"></select>
           
             <div id="mySkinActions" class="my-skin-actions" style="display:none;">
               <button type="button" id="btnSetAsBase" class="btn thin">Set as Base</button>
               <button type="button" id="btnDiscardAvatar" class="btn thin">Discard</button>
             </div>
           </div>



        </div>

        <div id="avatarStatus" class="status" role="status" aria-live="polite"></div>
      </div>
    </div>
  </aside>


    <!-- <footer class="watermark animated-text" id="dressupWatermark"> -->
    <footer class="watermark"id="dressupWatermark">
      <div id="animatedWatermarkText"></div>
    </footer>
  </div>

  <!-- was: <script src="/shared/js/supabase.js"></script> -->
<script src="/shared/js/supabase.js"></script>
<script src="/apps/tools/dressup/js/dressup.js"></script>


  
  <!-- <style>
    .animated-text {
      /* font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji"; */
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

      font-size: 11px;
      line-height: 1;
      color: rgba(251, 251, 251, 0.85);
      text-shadow: 0 1px 2px rgba(0,0,0,0.4);
      position: absolute;
      left: 2%;
      bottom: 2%;
      z-index: 3;
      text-align: left;
      white-space: pre-line;
      letter-spacing: 0.02em;
      width: auto;
      min-width: 120px;
      max-width: 220px;
      pointer-events: none;
      background: none;
      animation: none;
    }
  </style> -->
</body>

</html>
